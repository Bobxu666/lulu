<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Torchå¼ é‡æ•°æ®æ ¼å¼å¯è§†åŒ–</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        
        .main-container {
            background: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }
        
        h1 {
            text-align: center;
            color: #2c3e50;
            margin-bottom: 30px;
            font-size: 2.2em;
        }
        
        .tensor-section {
            background: #f8f9ff;
            margin: 25px 0;
            padding: 25px;
            border-radius: 12px;
            border-left: 5px solid #3498db;
            box-shadow: 0 3px 15px rgba(0,0,0,0.1);
        }
        
        .tensor-title {
            font-size: 1.3em;
            font-weight: bold;
            color: #2c3e50;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
        }
        
        .tensor-title .code {
            background: #2c3e50;
            color: white;
            padding: 5px 10px;
            border-radius: 5px;
            font-family: 'Courier New', monospace;
            margin-left: 10px;
            font-size: 0.9em;
        }
        
        .transformation {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 20px;
            margin: 20px 0;
            flex-wrap: wrap;
        }
        
        .tensor-box {
            background: white;
            border: 2px solid #3498db;
            border-radius: 8px;
            padding: 15px;
            text-align: center;
            min-width: 120px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        .tensor-box.numpy {
            border-color: #e74c3c;
            background: #fee;
        }
        
        .tensor-box.torch {
            border-color: #27ae60;
            background: #efe;
        }
        
        .tensor-shape {
            font-family: 'Courier New', monospace;
            font-size: 1.1em;
            font-weight: bold;
            margin-bottom: 8px;
        }
        
        .tensor-type {
            font-size: 0.9em;
            color: #666;
            margin-bottom: 10px;
        }
        
        .tensor-visual {
            margin: 10px 0;
        }
        
        .arrow {
            font-size: 2em;
            color: #3498db;
            font-weight: bold;
        }
        
        .operation {
            background: #ffeaa7;
            border: 2px solid #fdcb6e;
            border-radius: 8px;
            padding: 10px 15px;
            font-family: 'Courier New', monospace;
            font-weight: bold;
            color: #2d3436;
        }
        
        .dimension-grid {
            display: grid;
            gap: 2px;
            justify-content: center;
            margin: 10px 0;
        }
        
        .dim-cell {
            width: 15px;
            height: 15px;
            border: 1px solid #333;
            font-size: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .channel-legend {
            margin-top: 15px;
            padding: 10px;
            background: #ecf0f1;
            border-radius: 5px;
            font-size: 0.9em;
        }
        
        .channel-item {
            margin: 3px 0;
            display: flex;
            align-items: center;
        }
        
        .channel-color {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            margin-right: 8px;
            border: 1px solid #333;
        }
        
        .summary-section {
            background: #e8f5e8;
            border: 2px solid #27ae60;
            border-radius: 12px;
            padding: 20px;
            margin: 30px 0;
        }
        
        .summary-title {
            font-size: 1.4em;
            font-weight: bold;
            color: #27ae60;
            margin-bottom: 15px;
        }
        
        .final-tensor {
            display: flex;
            justify-content: space-between;
            flex-wrap: wrap;
            gap: 15px;
        }
        
        .final-item {
            background: white;
            border: 2px solid #27ae60;
            border-radius: 8px;
            padding: 15px;
            text-align: center;
            flex: 1;
            min-width: 200px;
        }
        
        .pytorch-note {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            border-radius: 8px;
            padding: 15px;
            margin: 20px 0;
            color: #856404;
        }
        
        .pytorch-note strong {
            color: #dc6545;
        }
        
        @media (max-width: 768px) {
            .transformation {
                flex-direction: column;
            }
            
            .arrow {
                transform: rotate(90deg);
            }
            
            .final-tensor {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <div class="main-container">
        <h1>ğŸ”„ Torchå¼ é‡æ•°æ®æ ¼å¼å˜æ¢å¯è§†åŒ–</h1>
        
        <div class="pytorch-note">
            <strong>PyTorchçº¦å®šï¼š</strong> å›¾åƒå¼ é‡é€šå¸¸ä½¿ç”¨ <code>(C, H, W)</code> æ ¼å¼ï¼Œå…¶ä¸­ C=é€šé“æ•°ï¼ŒH=é«˜åº¦ï¼ŒW=å®½åº¦ã€‚
            è¿™ä¸NumPyçš„ <code>(H, W, C)</code> æ ¼å¼ä¸åŒï¼Œå› æ­¤éœ€è¦ç»´åº¦å˜æ¢ã€‚
        </div>
        
        <!-- æ·±åº¦å›¾ -->
        <div class="tensor-section">
            <div class="tensor-title">
                1ï¸âƒ£ æ·±åº¦å›¾ (Depth)
                <div class="code">proj_depth</div>
            </div>
            
            <div class="transformation">
                <div class="tensor-box numpy">
                    <div class="tensor-shape">(H, W)</div>
                    <div class="tensor-type">NumPy Array</div>
                    <div class="tensor-visual" id="depth-numpy"></div>
                </div>
                
                <div class="arrow">â†’</div>
                
                <div class="operation">
                    .unsqueeze(0)
                </div>
                
                <div class="arrow">â†’</div>
                
                <div class="tensor-box torch">
                    <div class="tensor-shape">(1, H, W)</div>
                    <div class="tensor-type">Torch Tensor</div>
                    <div class="tensor-visual" id="depth-torch"></div>
                    <div class="channel-legend">
                        <div class="channel-item">
                            <div class="channel-color" style="background: #8e44ad;"></div>
                            æ·±åº¦å€¼ (å•é€šé“)
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- XYZIæ•°æ® -->
        <div class="tensor-section">
            <div class="tensor-title">
                2ï¸âƒ£ ç‚¹äº‘XYZIæ•°æ®
                <div class="code">proj_xyzi</div>
            </div>
            
            <div class="transformation">
                <div class="tensor-box numpy">
                    <div class="tensor-shape">(H, W, 4)</div>
                    <div class="tensor-type">NumPy Array</div>
                    <div class="tensor-visual" id="xyzi-numpy"></div>
                </div>
                
                <div class="arrow">â†’</div>
                
                <div class="operation">
                    .permute(2, 0, 1)
                </div>
                
                <div class="arrow">â†’</div>
                
                <div class="tensor-box torch">
                    <div class="tensor-shape">(4, H, W)</div>
                    <div class="tensor-type">Torch Tensor</div>
                    <div class="tensor-visual" id="xyzi-torch"></div>
                    <div class="channel-legend">
                        <div class="channel-item">
                            <div class="channel-color" style="background: #e74c3c;"></div>
                            Xåæ ‡
                        </div>
                        <div class="channel-item">
                            <div class="channel-color" style="background: #27ae60;"></div>
                            Yåæ ‡
                        </div>
                        <div class="channel-item">
                            <div class="channel-color" style="background: #3498db;"></div>
                            Zåæ ‡
                        </div>
                        <div class="channel-item">
                            <div class="channel-color" style="background: #f39c12;"></div>
                            å¼ºåº¦ (Intensity)
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- RGBå›¾åƒ -->
        <div class="tensor-section">
            <div class="tensor-title">
                3ï¸âƒ£ RGBå›¾åƒ
                <div class="code">proj_rgb</div>
            </div>
            
            <div class="transformation">
                <div class="tensor-box numpy">
                    <div class="tensor-shape">(H, W, 3)</div>
                    <div class="tensor-type">NumPy Array</div>
                    <div class="tensor-visual" id="rgb-numpy"></div>
                </div>
                
                <div class="arrow">â†’</div>
                
                <div class="operation">
                    .permute(2, 0, 1)
                </div>
                
                <div class="arrow">â†’</div>
                
                <div class="tensor-box torch">
                    <div class="tensor-shape">(3, H, W)</div>
                    <div class="tensor-type">Torch Tensor</div>
                    <div class="tensor-visual" id="rgb-torch"></div>
                    <div class="channel-legend">
                        <div class="channel-item">
                            <div class="channel-color" style="background: #e74c3c;"></div>
                            çº¢è‰²é€šé“ (R)
                        </div>
                        <div class="channel-item">
                            <div class="channel-color" style="background: #27ae60;"></div>
                            ç»¿è‰²é€šé“ (G)
                        </div>
                        <div class="channel-item">
                            <div class="channel-color" style="background: #3498db;"></div>
                            è“è‰²é€šé“ (B)
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- æ©ç  -->
        <div class="tensor-section">
            <div class="tensor-title">
                4ï¸âƒ£ æ©ç  (Mask)
                <div class="code">proj_mask</div>
            </div>
            
            <div class="transformation">
                <div class="tensor-box numpy">
                    <div class="tensor-shape">(H, W)</div>
                    <div class="tensor-type">NumPy Array</div>
                    <div class="tensor-visual" id="mask-numpy"></div>
                </div>
                
                <div class="arrow">â†’</div>
                
                <div class="operation">
                    .float().unsqueeze(0)
                </div>
                
                <div class="arrow">â†’</div>
                
                <div class="tensor-box torch">
                    <div class="tensor-shape">(1, H, W)</div>
                    <div class="tensor-type">Torch Tensor</div>
                    <div class="tensor-visual" id="mask-torch"></div>
                    <div class="channel-legend">
                        <div class="channel-item">
                            <div class="channel-color" style="background: #34495e;"></div>
                            æ©ç å€¼ (0æˆ–1)
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- æ ‡ç­¾ -->
        <div class="tensor-section">
            <div class="tensor-title">
                5ï¸âƒ£ æ ‡ç­¾ (Label)
                <div class="code">proj_label</div>
            </div>
            
            <div class="transformation">
                <div class="tensor-box numpy">
                    <div class="tensor-shape">(H, W)</div>
                    <div class="tensor-type">NumPy Array</div>
                    <div class="tensor-visual" id="label-numpy"></div>
                </div>
                
                <div class="arrow">â†’</div>
                
                <div class="operation">
                    .float().unsqueeze(0)
                </div>
                
                <div class="arrow">â†’</div>
                
                <div class="tensor-box torch">
                    <div class="tensor-shape">(1, H, W)</div>
                    <div class="tensor-type">Torch Tensor</div>
                    <div class="tensor-visual" id="label-torch"></div>
                    <div class="channel-legend">
                        <div class="channel-item">
                            <div class="channel-color" style="background: #9b59b6;"></div>
                            ç±»åˆ«æ ‡ç­¾ID
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- æ€»ç»“ -->
        <div class="summary-section">
            <div class="summary-title">ğŸ“Š æœ€ç»ˆå¼ é‡æ ¼å¼æ€»ç»“</div>
            <div class="final-tensor">
                <div class="final-item">
                    <strong>æ·±åº¦</strong><br>
                    (1, H, W)<br>
                    1é€šé“
                </div>
                <div class="final-item">
                    <strong>XYZI</strong><br>
                    (4, H, W)<br>
                    4é€šé“
                </div>
                <div class="final-item">
                    <strong>RGB</strong><br>
                    (3, H, W)<br>
                    3é€šé“
                </div>
                <div class="final-item">
                    <strong>æ©ç </strong><br>
                    (1, H, W)<br>
                    1é€šé“
                </div>
                <div class="final-item">
                    <strong>æ ‡ç­¾</strong><br>
                    (1, H, W)<br>
                    1é€šé“
                </div>
            </div>
            
            <div style="margin-top: 20px; padding: 15px; background: #fff; border-radius: 8px;">
                <strong>æ€»é€šé“æ•°ï¼š</strong> 1 + 4 + 3 + 1 + 1 = <span style="color: #e74c3c; font-size: 1.2em;">10é€šé“</span><br>
                <strong>ç”¨é€”ï¼š</strong> å¤šæ¨¡æ€æ·±åº¦å­¦ä¹ æ¨¡å‹çš„è¾“å…¥ï¼Œç»“åˆå‡ ä½•ã€é¢œè‰²ã€æ©ç å’Œæ ‡ç­¾ä¿¡æ¯
            </div>
        </div>
    </div>
    
    <script>
        // åˆ›å»ºå¯è§†åŒ–ç½‘æ ¼
        function createGrid(containerId, rows, cols, channels, colors) {
            const container = document.getElementById(containerId);
            const grid = document.createElement('div');
            grid.className = 'dimension-grid';
            grid.style.gridTemplateColumns = `repeat(${cols}, 15px)`;
            
            for (let c = 0; c < channels; c++) {
                for (let r = 0; r < rows; r++) {
                    for (let col = 0; col < cols; col++) {
                        const cell = document.createElement('div');
                        cell.className = 'dim-cell';
                        if (colors && colors[c]) {
                            cell.style.backgroundColor = colors[c];
                            cell.style.opacity = '0.7';
                        }
                        grid.appendChild(cell);
                    }
                }
            }
            
            container.appendChild(grid);
        }
        
        // åˆå§‹åŒ–æ‰€æœ‰å¯è§†åŒ–
        function initializeVisualizations() {
            const H = 6, W = 8; // ç¤ºä¾‹å°ºå¯¸
            
            // æ·±åº¦å›¾ (ç°è‰²)
            createGrid('depth-numpy', H, W, 1, ['#8e44ad']);
            createGrid('depth-torch', 1, H*W, 1, ['#8e44ad']);
            
            // XYZI (4é€šé“)
            const xyziColors = ['#e74c3c', '#27ae60', '#3498db', '#f39c12'];
            createGrid('xyzi-numpy', H, W, 4, xyziColors);
            createGrid('xyzi-torch', 4, H*W, 1, xyziColors);
            
            // RGB (3é€šé“)
            const rgbColors = ['#e74c3c', '#27ae60', '#3498db'];
            createGrid('rgb-numpy', H, W, 3, rgbColors);
            createGrid('rgb-torch', 3, H*W, 1, rgbColors);
            
            // æ©ç  (é»‘ç™½)
            createGrid('mask-numpy', H, W, 1, ['#34495e']);
            createGrid('mask-torch', 1, H*W, 1, ['#34495e']);
            
            // æ ‡ç­¾ (ç´«è‰²)
            createGrid('label-numpy', H, W, 1, ['#9b59b6']);
            createGrid('label-torch', 1, H*W, 1, ['#9b59b6']);
        }
        
        // é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', initializeVisualizations);
    </script>
</body>
</html>